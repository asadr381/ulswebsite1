{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asad\\\\Downloads\\\\Compressed\\\\react-website-v1-master\\\\src\\\\components\\\\pages\\\\SignUp.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport '../../App.css';\nconst FRAPPE_URL = \"https://ups-uat.sowaanerp.com\"; // Replace with your Frappe server URL\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\nexport default function SignUp() {\n  const [formData, setFormData] = useState({\n    lead_name: \"\",\n    email_id: \"\",\n    mobile_no: \"\",\n    status: \"Open\"\n  });\n  const [sessionId, setSessionId] = useState(null); // Store session ID\n\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // First, authenticate the user\n    const session = await login();\n    if (!session) {\n      console.error(\"Failed to authenticate. Cannot proceed.\");\n      return;\n    }\n    try {\n      const response = await axios.post(`${FRAPPE_URL}/api/resource/Lead`, {\n        doctype: \"Lead\",\n        ...formData\n      }, {\n        withCredentials: true,\n        // Ensures cookies are sent with the request\n        headers: {\n          'Content-Type': 'application/json',\n          'Cookie': session // Attach the session cookie\n        }\n      });\n      console.log(\"Lead created successfully:\", response.data);\n    } catch (error) {\n      console.error(\"Failed to create lead:\", error.response ? error.response.data : error.message);\n    }\n  };\n  const login = async () => {\n    try {\n      const response = await axios.post(`${FRAPPE_URL}/api/method/login`, {\n        usr: USERNAME,\n        pwd: PASSWORD\n      }, {\n        withCredentials: true\n      } // Ensures cookies are stored automatically\n      );\n      if (response.status === 200) {\n        console.log(\"Login successful!\");\n        const sessionCookie = response.headers['set-cookie'] ? response.headers['set-cookie'].join('; ') : null;\n        if (sessionCookie) {\n          setSessionId(sessionCookie);\n          return sessionCookie;\n        } else {\n          console.error(\"Session cookie not received.\");\n          return null;\n        }\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error.response ? error.response.data : error.message);\n    }\n    return null;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"Full Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"lead_name\",\n    value: formData.lead_name,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email_id\",\n    value: formData.email_id,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Mobile Number:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"mobile_no\",\n    value: formData.mobile_no,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, \"Get Quote\")));\n}","map":{"version":3,"names":["React","useState","axios","FRAPPE_URL","USERNAME","PASSWORD","SignUp","formData","setFormData","lead_name","email_id","mobile_no","status","sessionId","setSessionId","handleChange","e","target","name","value","handleSubmit","preventDefault","session","login","console","error","response","post","doctype","withCredentials","headers","log","data","message","usr","pwd","sessionCookie","join","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required"],"sources":["C:/Users/Asad/Downloads/Compressed/react-website-v1-master/src/components/pages/SignUp.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport '../../App.css';\n\nconst FRAPPE_URL = \"https://ups-uat.sowaanerp.com\";  // Replace with your Frappe server URL\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\n\nexport default function SignUp() {\n  const [formData, setFormData] = useState({\n    lead_name: \"\",\n    email_id: \"\",\n    mobile_no: \"\",\n    status: \"Open\",\n  });\n\n  const [sessionId, setSessionId] = useState(null); // Store session ID\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // First, authenticate the user\n    const session = await login();\n\n    if (!session) {\n      console.error(\"Failed to authenticate. Cannot proceed.\");\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        `${FRAPPE_URL}/api/resource/Lead`,\n        {\n          doctype: \"Lead\",\n          ...formData,\n        },\n        {\n          withCredentials: true, // Ensures cookies are sent with the request\n          headers: {\n            'Content-Type': 'application/json',\n            'Cookie': session, // Attach the session cookie\n          },\n        }\n      );\n\n      console.log(\"Lead created successfully:\", response.data);\n    } catch (error) {\n      console.error(\"Failed to create lead:\", error.response ? error.response.data : error.message);\n    }\n  };\n\n  const login = async () => {\n    try {\n      const response = await axios.post(\n        `${FRAPPE_URL}/api/method/login`,\n        { usr: USERNAME, pwd: PASSWORD },\n        { withCredentials: true } // Ensures cookies are stored automatically\n      );\n\n      if (response.status === 200) {\n        console.log(\"Login successful!\");\n        \n        const sessionCookie = response.headers['set-cookie'] ? response.headers['set-cookie'].join('; ') : null;\n        if (sessionCookie) {\n          setSessionId(sessionCookie);\n          return sessionCookie;\n        } else {\n          console.error(\"Session cookie not received.\");\n          return null;\n        }\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error.response ? error.response.data : error.message);\n    }\n    return null;\n  };\n\n  return (\n    <div className='sign-up'>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Full Name:</label>\n          <input\n            type=\"text\"\n            name=\"lead_name\"\n            value={formData.lead_name}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            name=\"email_id\"\n            value={formData.email_id}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Mobile Number:</label>\n          <input\n            type=\"text\"\n            name=\"mobile_no\"\n            value={formData.mobile_no}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <button type=\"submit\">Get Quote</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}