{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asad\\\\Downloads\\\\Compressed\\\\react-website-v1-master\\\\src\\\\components\\\\pages\\\\SignUp.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"../../App.css\";\nconst LOGIN_URL = \"https://ups-uat.sowaanerp.com/api/method/login\";\nconst CREATE_LEAD_URL = \"https://ups-uat.sowaanerp.com/api/resource/Lead\";\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\nexport default function LeadForm() {\n  const [loading, setLoading] = useState(false);\n\n  // Function to log in and get session cookies\n  const login = async () => {\n    try {\n      const response = await axios.post(LOGIN_URL, {\n        usr: USERNAME,\n        pwd: PASSWORD\n      }, {\n        withCredentials: true\n      } // Ensures cookies are sent\n      );\n      if (response.status === 200) {\n        console.log(\"Login successful!\");\n        return true;\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error.response ? error.response.data : error.message);\n      return false;\n    }\n  };\n\n  // Handle form submission and create lead\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const isLoggedIn = await login();\n    if (!isLoggedIn) {\n      alert(\"Login failed! Please check credentials.\");\n      setLoading(false);\n      return;\n    }\n    try {\n      // Lead data to be sent\n      const leadData = {\n        doctype: \"Lead\",\n        lead_name: \"John Doe\",\n        email_id: \"johndoe@example.com\",\n        mobile_no: \"1234567890\",\n        status: \"Open\"\n      };\n\n      // Sending lead data to Frappe API\n      const leadResponse = await axios.post(CREATE_LEAD_URL, leadData, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true // Ensures authentication cookies are used\n      });\n      console.log(\"Lead created successfully:\", leadResponse.data);\n      alert(\"Lead created successfully!\");\n    } catch (error) {\n      console.error(\"Failed to create lead:\", error.response ? error.response.data : error.message);\n      alert(\"Error creating the lead. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lead-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, \"Create Lead\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    className: \"submit-btn\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, loading ? \"Submitting...\" : \"Create Lead\"));\n}","map":{"version":3,"names":["React","useState","axios","LOGIN_URL","CREATE_LEAD_URL","USERNAME","PASSWORD","LeadForm","loading","setLoading","login","response","post","usr","pwd","withCredentials","status","console","log","error","data","message","handleSubmit","e","preventDefault","isLoggedIn","alert","leadData","doctype","lead_name","email_id","mobile_no","leadResponse","headers","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled"],"sources":["C:/Users/Asad/Downloads/Compressed/react-website-v1-master/src/components/pages/SignUp.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"../../App.css\";\n\nconst LOGIN_URL = \"https://ups-uat.sowaanerp.com/api/method/login\";\nconst CREATE_LEAD_URL = \"https://ups-uat.sowaanerp.com/api/resource/Lead\";\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\n\nexport default function LeadForm() {\n  const [loading, setLoading] = useState(false);\n\n  // Function to log in and get session cookies\n  const login = async () => {\n    try {\n      const response = await axios.post(\n        LOGIN_URL,\n        {\n          usr: USERNAME,\n          pwd: PASSWORD,\n        },\n        { withCredentials: true } // Ensures cookies are sent\n      );\n\n      if (response.status === 200) {\n        console.log(\"Login successful!\");\n        return true;\n      }\n    } catch (error) {\n      console.error(\"Login failed:\", error.response ? error.response.data : error.message);\n      return false;\n    }\n  };\n\n  // Handle form submission and create lead\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const isLoggedIn = await login();\n    if (!isLoggedIn) {\n      alert(\"Login failed! Please check credentials.\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Lead data to be sent\n      const leadData = {\n        doctype: \"Lead\",\n        lead_name: \"John Doe\",\n        email_id: \"johndoe@example.com\",\n        mobile_no: \"1234567890\",\n        status: \"Open\",\n      };\n\n      // Sending lead data to Frappe API\n      const leadResponse = await axios.post(CREATE_LEAD_URL, leadData, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true, // Ensures authentication cookies are used\n      });\n\n      console.log(\"Lead created successfully:\", leadResponse.data);\n      alert(\"Lead created successfully!\");\n    } catch (error) {\n      console.error(\"Failed to create lead:\", error.response ? error.response.data : error.message);\n      alert(\"Error creating the lead. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"lead-form-container\">\n      <h1>Create Lead</h1>\n      <button onClick={handleSubmit} className=\"submit-btn\" disabled={loading}>\n        {loading ? \"Submitting...\" : \"Create Lead\"}\n      </button>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}