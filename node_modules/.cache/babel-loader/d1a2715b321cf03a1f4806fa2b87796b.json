{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asad\\\\Downloads\\\\Compressed\\\\react-website-v1-master\\\\src\\\\components\\\\pages\\\\SignUp.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport '../../App.css';\nconst FRAPPE_URL = \"https://ups-uat.sowaanerp.com\"; // Frappe server URL\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\nexport default function SignUp() {\n  const [formData, setFormData] = useState({\n    lead_name: \"\",\n    email_id: \"\",\n    mobile_no: \"\",\n    status: \"Open\"\n  });\n  const [sessionCookie, setSessionCookie] = useState(null); // Store session cookie\n\n  // Handle input changes\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let session = sessionCookie; // Use stored session if available\n\n    if (!session) {\n      session = await login();\n      if (!session) {\n        console.error(\"❌ Failed to authenticate. Cannot proceed.\");\n        return;\n      }\n      setSessionCookie(session); // Save session for future requests\n    }\n    createLead(session);\n  };\n\n  // Login function\n  const login = async () => {\n    try {\n      const response = await axios.post(`${FRAPPE_URL}/api/method/login`, {\n        usr: USERNAME,\n        pwd: PASSWORD\n      }, {\n        withCredentials: true\n      });\n      if (response.status === 200) {\n        console.log(\"✅ Login successful!\");\n        const cookies = response.headers['set-cookie'];\n        if (cookies) {\n          console.log(\"✅ Session Cookies:\", cookies);\n          return cookies.join('; ');\n        } else {\n          console.warn(\"⚠️ No session cookies received.\");\n        }\n      }\n    } catch (error) {\n      var _error$response;\n      console.error(\"❌ Login failed:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    }\n    return null;\n  };\n\n  // Create Lead function\n  const createLead = async session => {\n    try {\n      const response = await axios.post(`${FRAPPE_URL}/api/resource/Lead`, {\n        doctype: \"Lead\",\n        ...formData\n      }, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Cookie': session // Attach session cookie\n        }\n      });\n      console.log(\"✅ Lead created successfully:\", response.data);\n    } catch (error) {\n      var _error$response2;\n      console.error(\"❌ Failed to create lead:\", ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Full Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"lead_name\",\n    value: formData.lead_name,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email_id\",\n    value: formData.email_id,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Mobile Number:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"mobile_no\",\n    value: formData.mobile_no,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"Get Quote\")));\n}","map":{"version":3,"names":["React","useState","axios","FRAPPE_URL","USERNAME","PASSWORD","SignUp","formData","setFormData","lead_name","email_id","mobile_no","status","sessionCookie","setSessionCookie","handleChange","e","target","name","value","handleSubmit","preventDefault","session","login","console","error","createLead","response","post","usr","pwd","withCredentials","log","cookies","headers","join","warn","_error$response","data","message","doctype","_error$response2","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required"],"sources":["C:/Users/Asad/Downloads/Compressed/react-website-v1-master/src/components/pages/SignUp.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport '../../App.css';\n\nconst FRAPPE_URL = \"https://ups-uat.sowaanerp.com\";  // Frappe server URL\nconst USERNAME = \"mraza@ups.com\";\nconst PASSWORD = \"asadraza@123\";\n\nexport default function SignUp() {\n  const [formData, setFormData] = useState({\n    lead_name: \"\",\n    email_id: \"\",\n    mobile_no: \"\",\n    status: \"Open\",\n  });\n\n  const [sessionCookie, setSessionCookie] = useState(null); // Store session cookie\n\n  // Handle input changes\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    let session = sessionCookie;  // Use stored session if available\n\n    if (!session) {\n      session = await login();\n      if (!session) {\n        console.error(\"❌ Failed to authenticate. Cannot proceed.\");\n        return;\n      }\n      setSessionCookie(session); // Save session for future requests\n    }\n\n    createLead(session);\n  };\n\n  // Login function\n  const login = async () => {\n    try {\n      const response = await axios.post(\n        `${FRAPPE_URL}/api/method/login`,\n        { usr: USERNAME, pwd: PASSWORD },\n        { withCredentials: true }\n      );\n\n      if (response.status === 200) {\n        console.log(\"✅ Login successful!\");\n\n        const cookies = response.headers['set-cookie'];\n        if (cookies) {\n          console.log(\"✅ Session Cookies:\", cookies);\n          return cookies.join('; ');\n        } else {\n          console.warn(\"⚠️ No session cookies received.\");\n        }\n      }\n    } catch (error) {\n      console.error(\"❌ Login failed:\", error.response?.data || error.message);\n    }\n    return null;\n  };\n\n  // Create Lead function\n  const createLead = async (session) => {\n    try {\n      const response = await axios.post(\n        `${FRAPPE_URL}/api/resource/Lead`,\n        { doctype: \"Lead\", ...formData },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Cookie': session,  // Attach session cookie\n          },\n        }\n      );\n\n      console.log(\"✅ Lead created successfully:\", response.data);\n    } catch (error) {\n      console.error(\"❌ Failed to create lead:\", error.response?.data || error.message);\n    }\n  };\n\n  return (\n    <div className='sign-up'>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Full Name:</label>\n          <input\n            type=\"text\"\n            name=\"lead_name\"\n            value={formData.lead_name}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            name=\"email_id\"\n            value={formData.email_id}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Mobile Number:</label>\n          <input\n            type=\"text\"\n            name=\"mobile_no\"\n            value={formData.mobile_no}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <button type=\"submit\">Get Quote</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}